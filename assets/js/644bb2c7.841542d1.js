"use strict";(self.webpackChunkranked_realm_docs=self.webpackChunkranked_realm_docs||[]).push([[169],{616:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"ROL/alt-auth-system","title":"Alternative Authentication & Permissions System","description":"This document outlines the alternative authentication and permissions system implementation found in the AltLib directory.","source":"@site/docs/ROL/alt-auth-system.md","sourceDirName":"ROL","slug":"/ROL/alt-auth-system","permalink":"/docs/ROL/alt-auth-system","draft":false,"unlisted":false,"editUrl":"https://github.com/Ranking-Of-Legends/rankedrealmdocs.github.io/tree/main/packages/create-docusaurus/templates/shared/docs/ROL/alt-auth-system.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Ranking of Legends (RoL) Event Management System - Business Overview","permalink":"/docs/ROL/ROL-Event-Management-System"},"next":{"title":"Authentication Documentation","permalink":"/docs/ROL/authentication"}}');var i=s(4848),t=s(8453);const l={},a="Alternative Authentication & Permissions System",o={},c=[{value:"System Overview",id:"system-overview",level:2},{value:"Directory Structure",id:"directory-structure",level:2},{value:"Role System",id:"role-system",level:2},{value:"Staff Roles Hierarchy",id:"staff-roles-hierarchy",level:3},{value:"Organization Roles",id:"organization-roles",level:3},{value:"Permissions System",id:"permissions-system",level:2},{value:"Resource Types",id:"resource-types",level:3},{value:"Feature Flags",id:"feature-flags",level:3},{value:"Permission Structure",id:"permission-structure",level:3},{value:"Components",id:"components",level:2},{value:"RoleGuard Component",id:"roleguard-component",level:3},{value:"State Management",id:"state-management",level:2},{value:"Session Store",id:"session-store",level:3},{value:"Staff Store",id:"staff-store",level:3},{value:"Role-Based Permissions",id:"role-based-permissions",level:2},{value:"Owner Permissions",id:"owner-permissions",level:3},{value:"Platform Admin Permissions",id:"platform-admin-permissions",level:3},{value:"Role-Specific Directors",id:"role-specific-directors",level:3},{value:"Coordinators",id:"coordinators",level:3},{value:"Customer Service",id:"customer-service",level:3},{value:"Implementation Details",id:"implementation-details",level:2},{value:"Session Initialization",id:"session-initialization",level:3},{value:"Access Control",id:"access-control",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Usage Guidelines",id:"usage-guidelines",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"alternative-authentication--permissions-system",children:"Alternative Authentication & Permissions System"})}),"\n",(0,i.jsx)(n.p,{children:"This document outlines the alternative authentication and permissions system implementation found in the AltLib directory."}),"\n",(0,i.jsx)(n.h2,{id:"system-overview",children:"System Overview"}),"\n",(0,i.jsx)(n.p,{children:"The system implements a sophisticated Role-Based Access Control (RBAC) with hierarchical permissions, organization-specific access control, and fine-grained resource management."}),"\n",(0,i.jsx)(n.h2,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"AltLib/lib/\r\n\u251c\u2500\u2500 config.ts\r\n\u251c\u2500\u2500 database.types.ts\r\n\u251c\u2500\u2500 supabase.ts\r\n\u251c\u2500\u2500 types.ts\r\n\u251c\u2500\u2500 components/\r\n\u2502   \u251c\u2500\u2500 RegionSelect.svelte\r\n\u2502   \u2514\u2500\u2500 RoleGuard.svelte\r\n\u251c\u2500\u2500 permissions/\r\n\u2502   \u251c\u2500\u2500 config.ts\r\n\u2502   \u251c\u2500\u2500 types.ts\r\n\u2502   \u2514\u2500\u2500 utils.ts\r\n\u251c\u2500\u2500 stores/\r\n\u2502   \u251c\u2500\u2500 permissions.ts\r\n\u2502   \u251c\u2500\u2500 session.ts\r\n\u2502   \u2514\u2500\u2500 staff.ts\r\n\u2514\u2500\u2500 supabase/\r\n    \u251c\u2500\u2500 client.ts\r\n    \u251c\u2500\u2500 helpers.ts\r\n    \u2514\u2500\u2500 types/\n"})}),"\n",(0,i.jsx)(n.h2,{id:"role-system",children:"Role System"}),"\n",(0,i.jsx)(n.h3,{id:"staff-roles-hierarchy",children:"Staff Roles Hierarchy"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const roleHierarchy = {\r\n    owner: [\r\n        'platform_admin',\r\n        'customer_service',\r\n        'tournament_director',\r\n        'tournament_coordinator',\r\n        'league_director',\r\n        'league_coordinator'\r\n    ],\r\n    platform_admin: [\r\n        'customer_service',\r\n        'tournament_director',\r\n        'tournament_coordinator',\r\n        'league_director',\r\n        'league_coordinator'\r\n    ],\r\n    tournament_director: ['tournament_coordinator'],\r\n    league_director: ['league_coordinator'],\r\n    customer_service: [],\r\n    tournament_coordinator: [],\r\n    league_coordinator: []\r\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"organization-roles",children:"Organization Roles"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"org_owner"}),"\n",(0,i.jsx)(n.li,{children:"org_manager"}),"\n",(0,i.jsx)(n.li,{children:"org_staff"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"permissions-system",children:"Permissions System"}),"\n",(0,i.jsx)(n.h3,{id:"resource-types",children:"Resource Types"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"ROL Staff Management"}),"\n",(0,i.jsx)(n.li,{children:"Tournament Management"}),"\n",(0,i.jsx)(n.li,{children:"League Management"}),"\n",(0,i.jsx)(n.li,{children:"Team Management"}),"\n",(0,i.jsx)(n.li,{children:"Esports Organizations"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"feature-flags",children:"Feature Flags"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Analytics Access"}),"\n",(0,i.jsx)(n.li,{children:"Settings Management"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"permission-structure",children:"Permission Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"type PermissionSet = {\r\n    resources: {\r\n        [key: string]: {\r\n            name: string;\r\n            description: string;\r\n            resource: string;\r\n            actions: string[];\r\n        }\r\n    },\r\n    features: {\r\n        [key: string]: {\r\n            name: string;\r\n            description: string;\r\n            feature: string;\r\n            allowed: boolean;\r\n        }\r\n    }\r\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"components",children:"Components"}),"\n",(0,i.jsx)(n.h3,{id:"roleguard-component",children:"RoleGuard Component"}),"\n",(0,i.jsx)(n.p,{children:"A reusable component for protecting content based on user roles:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-svelte",children:'<script lang="ts">\r\n    export let roles: StaffRole[] = [];\r\n    export let organizationId: string | undefined = undefined;\r\n<\/script>\r\n\r\n{#if hasAccess}\r\n    <slot />\r\n{:else}\r\n    <slot name="fallback">\r\n        <div class="unauthorized">\r\n            You don\'t have permission to view this content.\r\n        </div>\r\n    </slot>\r\n{/if}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Usage example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-svelte",children:"<RoleGuard roles={['owner', 'platform_admin']}>\r\n    <AdminPanel />\r\n</RoleGuard>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"state-management",children:"State Management"}),"\n",(0,i.jsx)(n.h3,{id:"session-store",children:"Session Store"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { writable } from 'svelte/store';\r\nimport type { User } from '@supabase/supabase-js';\r\n\r\nexport const user = writable<User | null>(null);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"staff-store",children:"Staff Store"}),"\n",(0,i.jsx)(n.p,{children:"Manages staff member data and provides role-checking utilities:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"export const staffMember = writable<StaffMember | null>(null);\r\n\r\n// Helper functions\r\nexport const isOwner = derived(staffMember, ($staffMember) => \r\n    $staffMember?.role === 'owner'\r\n);\r\n\r\nexport const isPlatformAdmin = derived(staffMember, ($staffMember) => \r\n    ['owner', 'platform_admin'].includes($staffMember?.role ?? '')\r\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"role-based-permissions",children:"Role-Based Permissions"}),"\n",(0,i.jsx)(n.h3,{id:"owner-permissions",children:"Owner Permissions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Full CRUD access to all resources"}),"\n",(0,i.jsx)(n.li,{children:"Access to all features"}),"\n",(0,i.jsx)(n.li,{children:"Can manage staff members"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"platform-admin-permissions",children:"Platform Admin Permissions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create, Read, Update access to staff"}),"\n",(0,i.jsx)(n.li,{children:"Full CRUD access to tournaments and leagues"}),"\n",(0,i.jsx)(n.li,{children:"Limited access to teams and organizations"}),"\n",(0,i.jsx)(n.li,{children:"Access to analytics and settings"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"role-specific-directors",children:"Role-Specific Directors"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tournament Director: Manage tournaments"}),"\n",(0,i.jsx)(n.li,{children:"League Director: Manage leagues"}),"\n",(0,i.jsx)(n.li,{children:"Limited to their specific domains"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"coordinators",children:"Coordinators"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Read and Update access to their respective areas"}),"\n",(0,i.jsx)(n.li,{children:"No Create or Delete permissions"}),"\n",(0,i.jsx)(n.li,{children:"No access to advanced features"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"customer-service",children:"Customer Service"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Read-only access to most resources"}),"\n",(0,i.jsx)(n.li,{children:"No access to advanced features"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"implementation-details",children:"Implementation Details"}),"\n",(0,i.jsx)(n.h3,{id:"session-initialization",children:"Session Initialization"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"user.subscribe(async (userData) => {\r\n    if (userData) {\r\n        const { data, error } = await supabase\r\n            .from('staff_members')\r\n            .select('*')\r\n            .eq('user_id', userData.id)\r\n            .single();\r\n        \r\n        if (data && !error) {\r\n            staffMember.set(data);\r\n        }\r\n    }\r\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"access-control",children:"Access Control"}),"\n",(0,i.jsx)(n.p,{children:"The system implements multiple layers of access control:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Route-level protection"}),"\n",(0,i.jsx)(n.li,{children:"Component-level guards"}),"\n",(0,i.jsx)(n.li,{children:"Resource-level permissions"}),"\n",(0,i.jsx)(n.li,{children:"Feature flags"}),"\n",(0,i.jsx)(n.li,{children:"Organization-specific access"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Type Safety"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Comprehensive TypeScript definitions"}),"\n",(0,i.jsx)(n.li,{children:"Strong typing for all permissions and roles"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Reactive Updates"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Svelte stores for reactive state management"}),"\n",(0,i.jsx)(n.li,{children:"Automatic permission updates on role changes"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Separation of Concerns"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Clear separation of authentication and authorization"}),"\n",(0,i.jsx)(n.li,{children:"Modular permission configuration"}),"\n",(0,i.jsx)(n.li,{children:"Reusable components and utilities"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Security"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Hierarchical role validation"}),"\n",(0,i.jsx)(n.li,{children:"Fine-grained permission control"}),"\n",(0,i.jsx)(n.li,{children:"Organization-level access restrictions"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"usage-guidelines",children:"Usage Guidelines"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Protecting Routes"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { RoleGuard } from '$lib/components/RoleGuard.svelte';\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Checking Permissions"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { hasRole, isOwner, isPlatformAdmin } from '$lib/stores/staff';\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Organization-Specific Access"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"<RoleGuard roles={['org_manager']} organizationId={orgId}>\r\n  <OrgContent />\r\n</RoleGuard>\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Feature Flags"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"{#if $staffMember?.features.viewAnalytics.allowed}\r\n  <AnalyticsPanel />\r\n{/if}\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var r=s(6540);const i={},t=r.createContext(i);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);